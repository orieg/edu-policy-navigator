---
// src/layouts/BaseLayout.astro
import "../styles/global.css";
// Import Leaflet CSS from node_modules
import "leaflet/dist/leaflet.css";

// Import MarkerCluster CSS from node_modules
import "leaflet.markercluster/dist/MarkerCluster.css";
import "leaflet.markercluster/dist/MarkerCluster.Default.css";
import { WEBSITE_NAME, WEBSITE_DESCRIPTION } from "../siteConfig"; // Import site constants

export interface Props {
    title?: string;
    description?: string;
    breadcrumbs?: { text: string; href?: string }[];
}
const {
    title = WEBSITE_NAME, // Use constant for default title
    description = WEBSITE_DESCRIPTION, // Use constant for default description
    breadcrumbs,
} = Astro.props;
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content={description} />
        <title>{title}</title>
    </head>
    <body>
        <header>
            <h1><a href="/">{title}</a></h1>
            {
                breadcrumbs && breadcrumbs.length > 0 && (
                    <nav aria-label="breadcrumb" class="breadcrumbs">
                        <ol>
                            {breadcrumbs.map((crumb, index) => (
                                <li
                                    aria-current={
                                        index === breadcrumbs.length - 1
                                            ? "page"
                                            : undefined
                                    }
                                >
                                    {crumb.href &&
                                    index < breadcrumbs.length - 1 ? (
                                        <a href={crumb.href}>{crumb.text}</a>
                                    ) : (
                                        crumb.text
                                    )}
                                </li>
                            ))}
                        </ol>
                    </nav>
                )
            }
        </header>
        <div class="disclaimer">
            <strong>Disclaimer:</strong> Data is based on publicly available sources
            from the CDE and other agencies. Policy information is synthesized and
            may require verification against official documents.
        </div>
        <main id="page-view">
            <slot />
            <!-- Page content goes here -->
        </main>
        <footer>
            <p>
                &copy; {new Date().getFullYear()}
                {WEBSITE_NAME}. All rights reserved.
            </p>
        </footer>
    </body>
</html>
